<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Senior's Allowance Program 2025</title>

  <link rel="stylesheet" href="./styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/react-toastify/8.2.0/ReactToastify.min.css" />

  <!-- Ringba -->
  <script src=//b-js.ringba.com/CA1a16b597ee204279b113debdbea8413c async></script>

  <style>
    .hidden { display: none; }
  </style>

  <!-- Start NB Pixel Snippet -->
  <script>
  !(function (e, n, t, i, p, a, s) {
    e[i] ||
      (((p = e[i] =
        function () {
          p.process ? p.process.apply(p, arguments) : p.queue.push(arguments);
        }).queue = []),
      (p.t = +new Date()),
      ((a = n.createElement(t)).async = 1),
      (a.src = 'https://static.newsbreak.com/business/tracking/nbpixel.js?t=' + 864e5 * Math.ceil(new Date() / 864e5)),
      (s = n.getElementsByTagName(t)[0]).parentNode.insertBefore(a, s));
  })(window, document, 'script', 'nbpix'),
    nbpix('init', 'ID-1969942475367669762'),
    nbpix('event', 'pageload');
  </script>
  <!-- End NB Pixel Snippet -->
</head>
<body>
  <div>
    <div style="margin-bottom: 4px; font-family: Arial, Helvetica, sans-serif;" class="top-sticky-blue-test2" id="top">
      Senior's Allowance Program 2025
    </div>

    <!-- Step messages -->
    <div class="checking hidden" style="font-weight:700;" id="status">
      <span id="statusMessage"></span>
    </div>

    <!-- Main content -->
    <div class="main-container-5" id="mainContent">
      <div class="main-descrition-5-5">
        <div class="main-des-title-6-7"><b>Seniors On Medicare Can Claim Their Food Allowance Card Worth Thousands Of Dollars!</b></div>
        <img class="topic-img-middle-z" src="./card.png" alt="head" />
        <div style="margin-top:14px;" class="main-des-5">
          Eligible Americans are taking advantage of this opportunity to secure their Food Allowance Card, which covers the cost of groceries, rent, bills, and other monthly expenses.
        </div>
        <div class="main-des-5" style="margin-top:-5px;">
          Use your allowance card at your favorite places like Walmart, Target, CVS, and many more. Answer the questions below to check your eligibility now!
        </div>
      </div>

      <div class="survey">
        <div class="quiz-5" id="btn">
          <span id="quizQuestion">Are you over the age of 64?</span>
        </div>
        <div class="answer" id="answerOptions">
          <div class="answer-btn-5" onclick="handleQuizP()">YES, I'M 65 OR OLDER</div>
          <div class="answer-btn-5" onclick="handleQuizN()">NO, I'M 64 OR YOUNGER</div>
        </div>
      </div>
    </div>

    <!-- Congratulations -->
    <div class="checking hidden" id="congratulations">
      <div class="congrats">Congratulations, You Qualify!</div>
      <div class="top-description-5">
        Make A <b>Quick Call</b> To Claim Your Food Allowance Card!
      </div>
      <div class="spots-count">Spots remaining: 4</div>
      <div class="tap-direction">ðŸ‘‡ TAP BELOW TO CALL ðŸ‘‡</div>

      <div class="call-btn">
        <!-- IMPORTANT: add id so we can attach a reliable click handler -->
        <a id="callLink" href="tel:+13236897861" style="text-decoration:none; color:inherit;">
          CALL (323) 689-7861
        </a>
      </div>

      <div class="sub-title">We Have Reserved Your Spot</div>
      <div class="sub-description">
        Due to high call volume, your official agent is waiting for only <b>3 minutes</b>, then your spot will not be reserved.
      </div>
      <div class="timer">
        <div class="timer-cell" id="minutes">3</div>
        <div class="timer-cell">:</div>
        <div class="timer-cell" id="seconds">00</div>
      </div>
    </div>

    <div class="footer2">
      <div class="terms2">
        <a href="/terms.html">Terms & Conditions</a> | 
        <a href="/privacy.html">Privacy Policy</a>
      </div>
      <div class="copyright">
  <img src="./dis-desktop.png" class="logo-desktop" alt="Desktop Logo" />
      <img src="./dis-mobile.png" class="logo-mobile" alt="Mobile Logo" />
      This website is operated by a marketing and lead generation company. We are not a government agency, insurance provider, or financial institution. Our role is to connect consumers with licensed professionals, carriers, or service providers who can discuss available options. We do not make eligibility determinations or provide coverage, financing, or government benefits directly.
      <br />

        Copyright Â© 2025 - All rights reserved Daily America Savings.
      </div>
    </div>
  </div>

  <script>
    let step = "process";
    let quizQuestion = "Are you over the age of 64?";
    const statusDiv = document.getElementById("status");
    const statusMessage = document.getElementById("statusMessage");
    const congratulationsDiv = document.getElementById("congratulations");
    const quizText = document.getElementById("quizQuestion");
    const answerOptions = document.getElementById("answerOptions");
    const minutesEl = document.getElementById("minutes");
    const secondsEl = document.getElementById("seconds");

    function handleQuizP() {
      if (quizQuestion === "Are you over the age of 64?") {
        quizQuestion = "2. Do you live in the United States?";
        quizText.textContent = quizQuestion;
        setYesNoOptions();
        smoothScrollToTop(1000, 532);
      } else {
        stepProcess("yes");
      }
    }

    function handleQuizN() {
      if (quizQuestion === "Are you over the age of 64?") {
        quizQuestion = "2. Do you live in the United States?";
        quizText.textContent = quizQuestion;
        setYesNoOptions();
        smoothScrollToTop(1000, 532);
      } else {
        stepProcess("no");
      }
    }

    function setYesNoOptions() {
      answerOptions.innerHTML = `
        <div class="answer-btn-5" onclick="stepProcess('yes')">YES</div>
        <div class="answer-btn-5" onclick="stepProcess('no')">NO</div>
      `;
    }

    function smoothScrollToTop(duration, targetPosition = 0) {
      const startPosition = window.pageYOffset;
      const distance = targetPosition - startPosition;
      let startTime = null;

      function animation(currentTime) {
        if (startTime === null) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const run = ease(timeElapsed, startPosition, distance, duration);
        window.scrollTo(0, run);
        if (timeElapsed < duration) requestAnimationFrame(animation);
      }

      function ease(t, b, c, d) {
        t /= d / 2;
        if (t < 1) return (c / 2) * t * t + b;
        t--;
        return (-c / 2) * (t * (t - 2) - 1) + b;
      }

      requestAnimationFrame(animation);
    }

    const stepProcess = (answer) => {
      smoothScrollToTop(1000);
      const mainContent = document.getElementById("mainContent");
      mainContent.classList.add("hidden");
      statusDiv.classList.remove("hidden");
      statusMessage.textContent = "Reviewing Your Answers...";

      setTimeout(() => {
        statusMessage.textContent = "Matching With Best Options...";
        setTimeout(() => {
          statusMessage.textContent = "Confirming Eligibility...";
          setTimeout(() => {
            setStep("completed");
          }, 1500);
        }, 1500);
      }, 1500);
    };

    function setStep(newStep) {
      step = newStep;
      if (step === "completed") {
        showCongratulations();
      }
    }

    function showCongratulations() {
      statusDiv.classList.add("hidden");
      congratulationsDiv.classList.remove("hidden");
      startTimer();
      setTimeout(() => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }, 100);
    }

    function startTimer() {
      let totalSeconds = 180;
      const timer = setInterval(() => {
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        minutesEl.textContent = minutes;
        secondsEl.textContent = seconds < 10 ? '0' + seconds : seconds;
        totalSeconds--;
        if (totalSeconds < 0) clearInterval(timer);
      }, 1000);
    }

    // ---------- NewsBreak raw_call firing on CALL click ----------
    // We attach a robust handler that (a) waits for nbpix if needed,
    // (b) tries to send the event, then (c) dials with a tiny delay to avoid event drops.
    (function attachCallHandler() {
      const link = document.getElementById('callLink');
      if (!link) return;

      // Wait for nbpix to be defined (max ~2s), then resolve regardless.
      function waitForNbpix(maxMs = 2000) {
        return new Promise(resolve => {
          if (typeof window.nbpix === 'function') return resolve(true);
          const start = Date.now();
          const iv = setInterval(() => {
            if (typeof window.nbpix === 'function' || Date.now() - start > maxMs) {
              clearInterval(iv);
              resolve(typeof window.nbpix === 'function');
            }
          }, 50);
        });
      }

      async function fireNbpixRawCall() {
        try {
          const ready = await waitForNbpix();
          if (ready) {
            window.nbpix('event', 'raw_call');
            return true;
          }
        } catch (e) {}
        return false;
      }

      link.addEventListener('click', async function (e) {
        // Prevent immediate navigation so the pixel has time to send
        e.preventDefault();
        const href = this.getAttribute('href');

        // Try to fire pixel
        let fired = await fireNbpixRawCall();

        // As an additional safety, try a sendBeacon-keepalive ping (best-effort)
        try {
          if (navigator.sendBeacon && typeof window.nbpix === 'object' && window.nbpix && window.nbpix.endpoint) {
            // If NB exposes an endpoint, you could sendBeacon here.
            // This is a placeholder pattern; SDK typically handles transport internally.
            // navigator.sendBeacon(window.nbpix.endpoint, JSON.stringify({event:'raw_call'}));
          }
        } catch (_) {}

        // Small delay to avoid drop, then dial
        setTimeout(() => {
          window.location.href = href;
        }, fired ? 120 : 180);
      });
    })();

    // (Optional direct API if you still want a callable function)
    function handleCall() {
      try { nbpix('event','raw_call'); } catch(e) {}
      // navigation handled by attached listener above
      console.log("handleCall triggered");
    }
  </script>
</body>
</html>
